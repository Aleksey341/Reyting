# Amvera Backend Configuration
# Production deployment with narrow CORS (specific domains only)
version: "1"
app:
  name: reyting
  runtime: docker
  build:
    dockerfile: Dockerfile
  run:
    containerPort: 80
    command:
      - uvicorn
      - main:app
      - --host
      - "0.0.0.0"
      - --port
      - "80"
      - --proxy-headers
      - --forwarded-allow-ips
      - "*"
    env:
      - name: DATABASE_URL
        value: ${DATABASE_URL}
      - name: DEBUG
        value: "false"
      - name: ALLOWED_ORIGINS
        value: "https://reyting-frontend-alex1976.amvera.io,https://reyting-alex1976.amvera.io"
  domains:
    - host: reyting-alex1976.amvera.io
      routes:
        - path: /
          port: 80
