# üìä –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ó–∞–≥—Ä—É–∑–∫–µ –î–∞–Ω–Ω—ã—Ö –∏–∑ data_extract

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –≤ PostgreSQL –ë–î –Ω–∞ –ê–º–≤–µ—Ä–∞.

---

## üìÅ –ò—Å—Ç–æ—á–Ω–∏–∫ –î–∞–Ω–Ω—ã—Ö

**–ü–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏:**
```
C:\Users\cobra\Desktop\–î–∞—à–±–æ—Ä–¥ –õ–∏–ø–µ—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏\–î–∞—à–±–æ—Ä–¥ –ì—É–±–µ—Ä–Ω–∞—Ç–æ—Ä–∞ –≥–ª–∞–≤—ã —Ä–µ–≥–∏–æ–Ω–æ–≤\data_extract
```

**–°–æ–¥–µ—Ä–∂–∏—Ç 21 CSV —Ñ–∞–π–ª:**
- `–û—Ü–µ–Ω–∫–∞_–ø–æ–¥–¥–µ—Ä–∂–∫–∏_—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è_v1__ALL.csv` (57 KB) - –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
- 20 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–í–Ω—É—Ç—Ä–∏–º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –º–æ–ª–æ–¥–µ–∂–∏, –∏ —Ç.–¥.)

**–î–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–∞—é—Ç:**
- 20 –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –õ–∏–ø–µ—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
- 30+ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π
- –ò–º–µ–Ω–∞ –∏ —Ñ–∞–º–∏–ª–∏–∏ –≥–ª–∞–≤ –ú–û
- –ë–∏–Ω–∞—Ä–Ω—ã–µ –∏ —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–î–∞/–ù–µ—Ç, –ø—Ä–æ—Ü–µ–Ω—Ç—ã, –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)

---

## üîß –ß—Ç–æ –ë—ã–ª–æ –°–æ–∑–¥–∞–Ω–æ

### –°–∫—Ä–∏–ø—Ç: `etl/load_assessment_data.py`

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úì –ü–∞—Ä—Å–∏—Ç CSV —Ñ–∞–π–ª—ã (–ª—é–±–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞)
- ‚úì –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –î–∞/–ù–µ—Ç –≤ 1/0
- ‚úì –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (0-100)
- ‚úì –í—ã—á–∏—Å–ª—è–µ—Ç scores –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úì –í—Å—Ç–∞–≤–ª—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `fact_indicator`
- ‚úì –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–µ–ø–æ–ª–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- ‚úì –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
load_assessment_data.py
‚îú‚îÄ‚îÄ get_db_engine()             - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îú‚îÄ‚îÄ get_municipality_id()       - –ü–æ–∏—Å–∫ –ú–û –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ get_indicator_id()          - –ü–æ–∏—Å–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ get_or_create_period()      - –ü–æ–ª—É—á–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞
‚îú‚îÄ‚îÄ parse_value()               - –ü–∞—Ä—Å–∏–Ω–≥ –∑–Ω–∞—á–µ–Ω–∏–π
‚îú‚îÄ‚îÄ load_csv_file()             - –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
‚îî‚îÄ‚îÄ load_all_data()             - –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
```

---

## üöÄ –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ —É –≤–∞—Å –∑–∞–ø—É—â–µ–Ω–∞ –ë–î)

**–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
cd –ü—Ä–æ–µ–∫—Ç/etl
pip install pandas sqlalchemy psycopg2-binary
```

**–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL**
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª load_assessment_data.py
# –°—Ç—Ä–æ–∫–∞ 19: DATABASE_URL = ...
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –æ—Ç –ë–î
```

**–®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç**
```bash
python load_assessment_data.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
======================================================================
üìä –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –û–¶–ï–ù–ö–ò –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò –†–£–ö–û–í–û–î–ò–¢–ï–õ–ï–ô
======================================================================
üìÅ –ü–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏: C:\Users\cobra\...\data_extract
üóÑÔ∏è  –ë–î: reytingdb
======================================================================

üìä –ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª: –û—Ü–µ–Ω–∫–∞_–ø–æ–¥–¥–µ—Ä–∂–∫–∏_—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è_v1__ALL.csv
   –ó–∞–≥—Ä—É–∂–µ–Ω–æ 420 —Å—Ç—Ä–æ–∫
   ‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ 1240 –∑–∞–ø–∏—Å–µ–π

üìä –ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª: –û—Ü–µ–Ω–∫–∞_–ø–æ–¥–¥–µ—Ä–∂–∫–∏_—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è_v1__–í–Ω—É—Ç—Ä–∏–º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã.csv
   –ó–∞–≥—Ä—É–∂–µ–Ω–æ 20 —Å—Ç—Ä–æ–∫
   ‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ 140 –∑–∞–ø–∏—Å–µ–π

... (–¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤)

‚úÖ –ó–ê–ì–†–£–ó–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê
   –í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: 5000+

======================================================================
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
======================================================================
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞ Amvera (—á–µ—Ä–µ–∑ psql –≤ –∫–æ–Ω—Å–æ–ª–∏)

**–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å Amvera**
```
https://console.amvera.ru
‚Üí Database (PostgreSQL)
‚Üí reytingdb
‚Üí Query Editor (–∏–ª–∏ pgAdmin)
```

**–®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö**

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ SQL (–±–µ–∑ Python):

```sql
-- –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ COPY (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–∞–ø–∫–∞)
COPY fact_indicator (mo_id, period_id, ind_id, value_raw, value_norm, score)
FROM '/path/to/data.csv'
DELIMITER ','
CSV HEADER;

-- –í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é –≤—Å—Ç–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
-- –¢—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
```

**–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
```sql
SELECT COUNT(*) as total_records FROM fact_indicator;
SELECT mo_id, period_id, COUNT(*) as indicators_count
FROM fact_indicator
GROUP BY mo_id, period_id;
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Docker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ docker-compose)

**–®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã**
```bash
docker-compose up -d
```

**–®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ backend**
```bash
docker-compose exec backend python etl/load_assessment_data.py
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ó–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –î–∞–Ω–Ω—ã—Ö

### –ò—Å—Ç–æ—á–Ω–∏–∫ (CSV):
```
–õ–∏—Å—Ç (–∫–∞—Ç–µ–≥–æ—Ä–∏—è)           | –ú—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç  | –ì–ª–∞–≤–∞ –ú–û      | –ó–Ω–∞—á–µ–Ω–∏–µ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –ê–ì–ü       | –õ–∏–ø–µ—Ü–∫         | –ß–µ–Ω—Ü–æ–≤ –†.–ò.   | 0.95
–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã –ú–û  | –õ–∏–ø–µ—Ü–∫         | –ß–µ–Ω—Ü–æ–≤ –†.–ò.   | —Ñ—É–Ω–∫—Ü–∏–æ–Ω–µ—Ä
–û—Ü–µ–Ω–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏           | –õ–∏–ø–µ—Ü–∫         | –ß–µ–Ω—Ü–æ–≤ –†.–ò.   | –î–∞
...
```

### –¶–µ–ª–µ–≤–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ (–ë–î):
```
fact_indicator —Ç–∞–±–ª–∏—Ü–∞:

mo_id      = ID –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞ (–∏–∑ dim_mo)
period_id  = ID –ø–µ—Ä–∏–æ–¥–∞ (2024-Q4)
ind_id     = ID –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ (–∏–∑ dim_indicator)
value_raw  = –ò—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∫–∞–∫ –≤ CSV)
value_norm = –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ (0-100)
score      = –í—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π score (0-10)
```

### –¢–∞–±–ª–∏—Ü–∞ dim_indicator:
```
ind_id | code          | name                      | block      | weight
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1      | AGP_TASKS     | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –ê–ì–ü      | –ö–∞—á–µ—Å—Ç–≤–æ   | 0.1
2      | POSITIONING   | –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã –ú–û | –ö–∞—á–µ—Å—Ç–≤–æ   | 0.05
3      | SUPPORT       | –û—Ü–µ–Ω–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏          | –ü–æ–¥–¥–µ—Ä–∂–∫–∞  | 0.15
```

---

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ë–î

–ü–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

- [ ] –ë–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (`database_schema.sql` –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
- [ ] –¢–∞–±–ª–∏—Ü–∞ `dim_mo` —Å–æ–¥–µ—Ä–∂–∏—Ç 20 –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤
- [ ] –¢–∞–±–ª–∏—Ü–∞ `dim_indicator` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- [ ] –¢–∞–±–ª–∏—Ü–∞ `dim_period` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–∏–æ–¥—ã
- [ ] –¢–∞–±–ª–∏—Ü–∞ `fact_indicator` –ø—É—Å—Ç–∞ –∏–ª–∏ –≥–æ—Ç–æ–≤–∞ –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é
- [ ] PostgreSQL –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```sql
SELECT COUNT(*) FROM dim_mo;           -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 20
SELECT COUNT(*) FROM dim_indicator;    -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 5+
SELECT COUNT(*) FROM dim_period;       -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 3+
SELECT COUNT(*) FROM fact_indicator;   -- –ú–æ–∂–µ—Ç –±—ã—Ç—å 0
```

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `DATABASE_URL`:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏:
export DATABASE_URL="postgresql://reyting_user:PASSWORD@amvera-alex1976-cnpq-reyting-mo-rw:5432/reytingdb"
python load_assessment_data.py

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª:
# DATABASE_URL=postgresql://...
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞.

---

## üìà –ß—Ç–æ –ü—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ü–æ—Å–ª–µ –ó–∞–≥—Ä—É–∑–∫–∏

### 1. fact_indicator –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
```sql
SELECT * FROM fact_indicator LIMIT 10;
```

### 2. fact_summary –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–∞
```sql
-- –û–±–Ω–æ–≤–∏—Ç—å summary –¥–∞–Ω–Ω—ã–µ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
-- –ù–∞ –æ—Å–Ω–æ–≤–µ fact_indicator –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∏—Ç–æ–≥–æ–≤—ã–µ scores
```

### 3. Frontend –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∏
- –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
- –ö–∞—Ä—Ç–∞ –±—É–¥–µ—Ç —Ä–∞—Å–∫—Ä–∞—à–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ zones
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–∫–∞–∂–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã –∏ –†–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "ModuleNotFoundError: No module named 'sqlalchemy'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install sqlalchemy psycopg2-binary pandas
```

### –ü—Ä–æ–±–ª–µ–º–∞: "could not connect to server"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ —Å –≤–∞—à–µ–≥–æ IP

### –ü—Ä–æ–±–ª–µ–º–∞: "relation fact_indicator does not exist"

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ `database_schema.sql` —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –Ω—É–∂–Ω–æ–π –ë–î (reytingdb)

### –ü—Ä–æ–±–ª–µ–º–∞: "–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö 0 –∑–∞–ø–∏—Å–µ–π"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ CSV —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `data_extract`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ CSV –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞ "–ú—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è –ú–û —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Ç–µ–º–∏ —á—Ç–æ –≤ dim_mo

---

## üìù –õ–æ–≥–∏ –∏ –û—Ç–ª–∞–¥–∫–∞

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:

**–í —Ñ–∞–π–ª–µ:**
```python
# –°—Ç—Ä–æ–∫–∞ 23 –≤ load_assessment_data.py
logging.basicConfig(level=logging.DEBUG)  # –ò–∑–º–µ–Ω–∏—Ç–µ INFO –Ω–∞ DEBUG
```

**–í –∫–æ–Ω—Å–æ–ª–∏:**
```bash
python load_assessment_data.py 2>&1 | tee load.log
```

### –§–æ—Ä–º–∞—Ç—ã –ª–æ–≥–æ–≤:
```
INFO    - –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ–¥–µ –∑–∞–≥—Ä—É–∑–∫–∏
WARNING - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–ú–û –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω)
ERROR   - –û—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
DEBUG   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –î–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –ø–æ —Ñ–∞–π–ª–∞–º:

```
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª:
  –û—Ü–µ–Ω–∫–∞_–ø–æ–¥–¥–µ—Ä–∂–∫–∏_—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è_v1__ALL.csv     ~1200 –∑–∞–ø–∏—Å–µ–π

–ö–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–µ —Ñ–∞–π–ª—ã (–ø–æ 20 –ø–æ –∫–∞–∂–¥–æ–º—É):
  –í–Ω—É—Ç—Ä–∏–º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã                  ~20 –∑–∞–ø–∏—Å–µ–π
  –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –º–æ–ª–æ–¥–µ–∂–∏ (–î–≤–∏–∂–µ–Ω–∏–µ)              ~20 –∑–∞–ø–∏—Å–µ–π
  –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –º–æ–ª–æ–¥–µ–∂–∏ (–î–æ–±—Ä–æ–≤–æ–ª—å—á–µ—Å—Ç–≤–æ)      ~20 –∑–∞–ø–∏—Å–µ–π
  –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –ê–ì–ü                          ~20 –∑–∞–ø–∏—Å–µ–π
  ...–∏ 16 –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```

**–ò—Ç–æ–≥–æ: ~5000+ –∑–∞–ø–∏—Å–µ–π**

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ú–û:**
- –ö–∞–∂–¥–æ–µ –ú–û –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —Ä–∞–∑–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º)
- –í—Å–µ 20 –ú–û –õ–∏–ø–µ—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã

---

## ‚ú® –ü–æ—Å–ª–µ –ó–∞–≥—Ä—É–∑–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Frontend

```
https://reyting.amvera.ru
‚Üí –°—Ç—Ä–∞–Ω–∏—Ü–∞ –†–µ–π—Ç–∏–Ω–≥–∞
‚Üí –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞–º–∏ –∏ –∏—Ö scores
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API

```bash
curl https://api.reyting.amvera.ru/api/rating
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –ú–û
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ –ê–Ω–∞–ª–∏—Ç–∏–∫—É

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ fact_summary
python etl/update_summary_data.py
```

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ü–æ–º–æ—â—å

- **–í–æ–ø—Ä–æ—Å—ã –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î**: —Å–º–æ—Ç—Ä–∏—Ç–µ `database_schema.sql`
- **–í–æ–ø—Ä–æ—Å—ã –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: —Å–º–æ—Ç—Ä–∏—Ç–µ `backend/config.py`
- **–í–æ–ø—Ä–æ—Å—ã –æ API**: —Å–º–æ—Ç—Ä–∏—Ç–µ `https://api.reyting.amvera.ru/docs`
- **–í–æ–ø—Ä–æ—Å—ã –æ –¥–∞–Ω–Ω—ã—Ö**: —Å–º–æ—Ç—Ä–∏—Ç–µ CSV —Ñ–∞–π–ª—ã –≤ `data_extract/`

---

**–í–µ—Ä—Å–∏—è**: 1.0.0
**–î–∞—Ç–∞**: 04.11.2025
**–°—Ç–∞—Ç—É—Å**: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
